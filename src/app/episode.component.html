<div class="container" style="margin-top: 70px">
  @for ( episode of episode_list; track episode.title ) {

    <div class="row">
      <div class="col-sm-6">
        <div class="display-1">
          {{ episode.title }}
        </div>
        <span *ngFor="let star of [].constructor(Math.round(episode.imdbRating))">
          <img src="images/star.png"
               style="width:30px; height:30px">
        </span>
      </div>
      <div class="col-sm-6 align-self-end text-end">
        <span>
          Season:
          {{ episode.seasonNumber}} <br>
          Episode Number:
          {{ episode.episodeNumber }}
        </span>
      </div>
    </div>

    <div class="row" style="margin-top: 70px">
      <div class="col-sm-12">
        @for ( trivia of trivia_list; track trivia ) {
          <div class="card bg-light mb-3">

            <div class="card-header">
              {{ trivia.user }}
            </div>
            <div class="card-body">
              {{ trivia.text }}
            </div>
            <div class="card-footer">
              <!-- TODO: get score from fetchAllTrivias -->
              Rating: {{ trivia.upvotes }}
            </div>

          </div>
        }
      </div>
    </div>
  }
</div>

<div class="container" style="margin-top: 50px;">
  <div class="row">
    <div class="col-sm-12">
      <h2>Submit Trivia!</h2>
      <form [formGroup]="triviaForm"
            (ngSubmit)="onSubmit()">
        <div class="form-group">
          <textarea name="trivia" id="trivia"
                    class="form-control"
                    formControlName="trivia"
                    [ngClass]="{ 'error' : isInvalid('trivia')}">>
          </textarea>
        </div>
        <span *ngIf="isIncomplete()">
          You must complete all fields
        </span>
        <button *ngIf="!isIncomplete()" class="btn btn-primary"
                type="submit"
                style="margin-top: 20px">Submit</button>
      </form>
    </div>
  </div>
</div>
